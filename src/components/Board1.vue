<template>
  <div
    class="grid" >
    <div
      id = "00"  
      class = "boardSquare"
      @click="coordinateSelect('00')"/>
    <div
      id = "01"  
      class = "boardSquare" 
      @click="coordinateSelect('01')"/>
    <div
      id = "02"     
      class = "boardSquare" 
      @click="coordinateSelect('02')"/>
    <div  
      id = "03"
      class = "boardSquare" 
      @click="coordinateSelect('03')"/>
    <div 
      id = "04"    
      class = "boardSquare" 
      @click="coordinateSelect('04')"/>
    <div
      id = "05"   
      class = "boardSquare" 
      @click="coordinateSelect('05')"/>
    <div
      id = "06"  
      class = "boardSquare" 
      @click="coordinateSelect('06')"/>
    <div
      id = "07"  
      class = "boardSquare" 
      @click="coordinateSelect('07')"/>
    <div  
      id = "08"  
      class = "boardSquare" 
      @click="coordinateSelect('08')"/>
    <div 
      id = "09"    
      class = "boardSquare" 
      @click="coordinateSelect('09')"/>
    <div
      id = "10"        
      class = "boardSquare" 
      @click="coordinateSelect('10')"/>
    <div  
      id = "11"  
      class = "boardSquare" 
      @click="coordinateSelect('11')"/>
    <div 
      id = "12"    
      class = "boardSquare" 
      @click="coordinateSelect('12')"/>
    <div 
      id = "13"      
      class = "boardSquare" 
      @click="coordinateSelect('13')"/>
    <div 
      id = "14"    
      class = "boardSquare" 
      @click="coordinateSelect('14')"/>
    <div 
      id = "15"    
      class = "boardSquare" 
      @click="coordinateSelect('15')"/>
    <div 
      id = "16"    
      class = "boardSquare" 
      @click="coordinateSelect('16')"/>
    <div  
      id = "17"  
      class = "boardSquare" 
      @click="coordinateSelect('17')"/>
    <div  
      id = "18"  
      class = "boardSquare" 
      @click="coordinateSelect('18')"/>
    <div  
      id = "19"  
      class = "boardSquare" 
      @click="coordinateSelect('19')"/>
    <div 
      id = "20"    
      class = "boardSquare" 
      @click="coordinateSelect('20')"/>
    <div
      id = "21"  
      class = "boardSquare" 
      @click="coordinateSelect('21')"/>
    <div  
      id = "22"  
      class = "boardSquare" 
      @click="coordinateSelect('22')"/>
    <div  
      id = "23"  
      class = "boardSquare" 
      @click="coordinateSelect('23')"/>
    <div  
      id = "24"  
      class = "boardSquare" 
      @click="coordinateSelect('24')"/>
    <div 
      id = "25"    
      class = "boardSquare" 
      @click="coordinateSelect('25')"/>
    <div 
      id = "26"    
      class = "boardSquare" 
      @click="coordinateSelect('26')"/>
    <div  
      id = "27"  
      class = "boardSquare" 
      @click="coordinateSelect('27')"/>
    <div  
      id = "28"  
      class = "boardSquare" 
      @click="coordinateSelect('28')"/>
    <div  
      id = "29"  
      class = "boardSquare" 
      @click="coordinateSelect('29')"/>
    <div  
      id = "30"  
      class = "boardSquare" 
      @click="coordinateSelect('30')"/>
    <div  
      id = "31"  
      class = "boardSquare" 
      @click="coordinateSelect('31')"/>
    <div 
      id = "32"    
      class = "boardSquare" 
      @click="coordinateSelect('32')"/>
    <div  
      id = "33"  
      class = "boardSquare" 
      @click="coordinateSelect('33')"/>
    <div  
      id = "34"  
      class = "boardSquare" 
      @click="coordinateSelect('34')"/>
    <div 
      id = "35"    
      class = "boardSquare" 
      @click="coordinateSelect('35')"/>
    <div  
      id = "36"  
      class = "boardSquare" 
      @click="coordinateSelect('36')"/>
    <div  
      id = "37"  
      class = "boardSquare" 
      @click="coordinateSelect('37')"/>
    <div  
      id = "38"  
      class = "boardSquare" 
      @click="coordinateSelect('38')"/>
    <div  
      id = "39"  
      class = "boardSquare" 
      @click="coordinateSelect('39')"/>
    <div  
      id = "40"  
      class = "boardSquare" 
      @click="coordinateSelect('40')"/>
    <div  
      id = "41"  
      class = "boardSquare" 
      @click="coordinateSelect('41')"/>
    <div  
      id = "42"  
      class = "boardSquare" 
      @click="coordinateSelect('42')"/>
    <div  
      id = "43"  
      class = "boardSquare" 
      @click="coordinateSelect('43')"/>
    <div  
      id = "44"  
      class = "boardSquare" 
      @click="coordinateSelect('44')"/>
    <div  
      id = "45"  
      class = "boardSquare" 
      @click="coordinateSelect('45')"/>
    <div  
      id = "46"  
      class = "boardSquare" 
      @click="coordinateSelect('46')"/>
    <div  
      id = "47"  
      class = "boardSquare" 
      @click="coordinateSelect('47')"/>
    <div  
      id = "48"  
      class = "boardSquare" 
      @click="coordinateSelect('48')"/>
    <div  
      id = "49"  
      class = "boardSquare" 
      @click="coordinateSelect('49')"/>
    <div  
      id = "50"  
      class = "boardSquare" 
      @click="coordinateSelect('50')"/>
    <div  
      id = "51"  
      class = "boardSquare" 
      @click="coordinateSelect('51')"/>
    <div  
      id = "52"  
      class = "boardSquare" 
      @click="coordinateSelect('52')"/>
    <div  
      id = "53"  
      class = "boardSquare" 
      @click="coordinateSelect('53')"/>
    <div  
      id = "54"  
      class = "boardSquare" 
      @click="coordinateSelect('54')"/>
    <div  
      id = "55"  
      class = "boardSquare" 
      @click="coordinateSelect('55')"/>
    <div  
      id = "56"  
      class = "boardSquare" 
      @click="coordinateSelect('56')"/>
    <div  
      id = "57"  
      class = "boardSquare" 
      @click="coordinateSelect('57')"/>
    <div  
      id = "58"  
      class = "boardSquare" 
      @click="coordinateSelect('58')"/>
    <div  
      id = "59"  
      class = "boardSquare" 
      @click="coordinateSelect('59')"/>
    <div  
      id = "60"  
      class = "boardSquare" 
      @click="coordinateSelect('60')"/>
    <div  
      id = "61"  
      class = "boardSquare" 
      @click="coordinateSelect('61')"/>
    <div  
      id = "62"  
      class = "boardSquare" 
      @click="coordinateSelect('62')"/>
    <div  
      id = "63"  
      class = "boardSquare" 
      @click="coordinateSelect('63')"/>
    <div  
      id = "64"  
      class = "boardSquare" 
      @click="coordinateSelect('64')"/>
    <div  
      id = "65"  
      class = "boardSquare" 
      @click="coordinateSelect('65')"/>
    <div  
      id = "66"  
      class = "boardSquare" 
      @click="coordinateSelect('66')"/>
    <div  
      id = "67"  
      class = "boardSquare" 
      @click="coordinateSelect('67')"/>
    <div  
      id = "68"  
      class = "boardSquare" 
      @click="coordinateSelect('68')"/>
    <div 
      id = "69"    
      class = "boardSquare" 
      @click="coordinateSelect('69')"/>
    <div 
      id = "70"    
      class = "boardSquare" 
      @click="coordinateSelect('70')"/>
    <div  
      id = "71"  
      class = "boardSquare" 
      @click="coordinateSelect('71')"/>
    <div  
      id = "72"  
      class = "boardSquare" 
      @click="coordinateSelect('72')"/>
    <div  
      id = "73"  
      class = "boardSquare" 
      @click="coordinateSelect('73')"/>
    <div  
      id = "74"  
      class = "boardSquare" 
      @click="coordinateSelect('74')"/>
    <div  
      id = "75"  
      class = "boardSquare" 
      @click="coordinateSelect('75')"/>
    <div  
      id = "76"  
      class = "boardSquare" 
      @click="coordinateSelect('76')"/>
    <div 
      id = "77"    
      class = "boardSquare" 
      @click="coordinateSelect('77')"/>
    <div  
      id = "78"  
      class = "boardSquare" 
      @click="coordinateSelect('78')"/>
    <div  
      id = "79"  
      class = "boardSquare" 
      @click="coordinateSelect('79')"/>
    <div  
      id = "80"  
      class = "boardSquare" 
      @click="coordinateSelect('80')"/>
    <div  
      id = "81"  
      class = "boardSquare" 
      @click="coordinateSelect('81')"/>
    <div  
      id = "82"  
      class = "boardSquare" 
      @click="coordinateSelect('82')"/>
    <div  
      id = "83"  
      class = "boardSquare" 
      @click="coordinateSelect('83')"/>
    <div  
      id = "84"  
      class = "boardSquare" 
      @click="coordinateSelect('84')"/>
    <div  
      id = "85"  
      class = "boardSquare" 
      @click="coordinateSelect('85')"/>
    <div  
      id = "86"  
      class = "boardSquare" 
      @click="coordinateSelect('86')"/>
    <div  
      id = "87"  
      class = "boardSquare" 
      @click="coordinateSelect('87')"/>
    <div  
      id = "88"  
      class = "boardSquare" 
      @click="coordinateSelect('88')"/>
    <div  
      id = "89"  
      class = "boardSquare" 
      @click="coordinateSelect('89')"/> 
    <div  
      id = "90"  
      class = "boardSquare" 
      @click="coordinateSelect('90')"/>
    <div  
      id = "91"  
      class = "boardSquare" 
      @click="coordinateSelect('91')"/>
    <div  
      id = "92"  
      class = "boardSquare" 
      @click="coordinateSelect('92')"/>
    <div  
      id = "93"  
      class = "boardSquare" 
      @click="coordinateSelect('93')"/>
    <div  
      id = "94"  
      class = "boardSquare" 
      @click="coordinateSelect('94')"/>
    <div  
      id = "95"  
      class = "boardSquare" 
      @click="coordinateSelect('95')"/>
    <div  
      id = "96"  
      class = "boardSquare" 
      @click="coordinateSelect('96')"/>
    <div  
      id = "97"  
      class = "boardSquare" 
      @click="coordinateSelect('97')"/>
    <div  
      id = "98"  
      class = "boardSquare" 
      @click="coordinateSelect('98')"/>
    <div 
      id = "99"  
      class = "boardSquare" 
      @click="coordinateSelect('99')"/>
  </div>
</template>

<script>

// Placing ships over other ships still changes the colour!!!!!

export default {
    name: 'Board1',

    // eslint-disable-next-line
    props:['ship','msg','shipplacement'],

    data (){
        return{
            coordinate: ''
        }
    },
    methods: {
        coordinateSelect(coordinate){
          if(this.shipplacement){
            this.coordinate = coordinate
            this.$emit('changeCoordinate', this.coordinate)
            this.markShipPlacement(coordinate)
          }
        },

        markShipPlacement(coordinate){

          // logic to test if a tile is eliglbe for colour change ( due to ship placement)
          if(this.ship.vertical == false){
            let z = parseInt(coordinate[1])
            for (let j = 0; j < this.ship.length; j++){
              // preserves coordinates first digit as the second digit changes
              let testSquare = document.getElementById(coordinate[0]+z)
              if(
              testSquare.classList.contains('carrier-tile') || 
              testSquare.classList.contains('battleship-tile') || 
              testSquare.classList.contains('destroyer-tile') || 
              testSquare.classList.contains('submarine-tile') ||
              testSquare.classList.contains('patrol-tile')){
                return false
              }
              z++
            }
          }
          // logic to test if a tile is eliglbe for colour change ( due to ship placement)
          else if(this.ship.vertical == true){
            let z = parseInt(coordinate[0])
            for (let j = 0; j < this.ship.length; j++){
              // preserves coordinates second digit as the first digit changes
              let testSquare = document.getElementById(z+coordinate[1])
              if(
              testSquare.classList.contains('carrier-tile') || 
              testSquare.classList.contains('battleship-tile') || 
              testSquare.classList.contains('destroyer-tile') || 
              testSquare.classList.contains('submarine-tile') ||
              testSquare.classList.contains('patrol-tile')){
                return false
              }
              z++
            }
          }
          
          
          // logic if ship is horizontal
          if(this.ship.vertical == false){
            // only need to check second digit if ship is horizontal
            let i = parseInt(coordinate[1])
            if(i+this.ship.length > 10){
              return false
            }
            else{             
              // remove selected ship class from all tiles, so it can be placed elsewhere
              let resetSquares = document.getElementsByClassName('boardSquare')
              for (let x = 0; x < resetSquares.length; x++) {
                resetSquares[x].classList.remove(this.ship.name+'-tile')
                }

              // run loop the same number of times as the ships length
              for (let j = 0; j < this.ship.length; j++){
                // preserves coordinates first digit as the second digit changes
                let square = document.getElementById(coordinate[0]+i)
                square.classList.add(this.ship.name+'-tile')
                i++
              }
            }
          }
          else if(this.ship.vertical == true){
            // only need to check first digit if ship is vertical
            let i = parseInt(coordinate[0])
            if(i+this.ship.length > 10){
              return false
            }
            else{             
              // remove selected ship class from all tiles, so it can be placed elsewhere
              let resetSquares = document.getElementsByClassName('boardSquare')
              for (let x = 0; x < resetSquares.length; x++) {
                resetSquares[x].classList.remove(this.ship.name+'-tile')
                }

              // run loop the same number of times as the ships length
              for (let j = 0; j < this.ship.length; j++){
                // preserves coordinates first digit as the second digit changes
                let square = document.getElementById(i+coordinate[1])
                square.classList.add(this.ship.name+'-tile')
                i++
              }
            }
          }

        },
    },
}

</script>

<style scoped>


.grid{
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}

.boardSquare{
  height: 9%;
  width: 9%;
  margin: 1px;
  border: 1px solid black;
  background-color:rgb(226, 233, 238);
  text-align: center;
  --main-color: rgb(226, 233, 238);
  display: flex;
  align-items: center;
  justify-content: center;
}

.boardSquare:hover{
   transform: scale(1.03);
}

.carrier-tile{
  background-color: purple;
}

.battleship-tile{
  background-color: rgb(14, 211, 14);
}

.destroyer-tile{
  background-color: rgb(248, 244, 4);
}

.submarine-tile{
  background-color: rgb(13, 231, 231);
}

.patrolBoat-tile{
  background-color: rgb(245, 160, 3);
}

.glow{
  background-color:rgb(226, 233, 238);
}

.glow:hover{
  background-color: rgb(226, 233, 238);;
}

</style>

